<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Airline Ticket Price Calculator with Baggage Fee</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .textarea-container {
            width: 45%;
        }
        .buttons-container {
            width: 10%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        textarea {
            width: 100%;
            height: 400px;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            resize: none;
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }
        button {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px 0;
            width: 80px;
            text-align: center;
        }
        .kg-15 {
            background-color: #a8d1ff;
            border: 2px solid #0080ff;
        }
        .kg-20 {
            background-color: #b8ff9f;
            border: 2px solid #4caf50;
        }
        .kg-25 {
            background-color: #ffe0a8;
            border: 2px solid #ff9800;
        }
        .kg-30 {
            background-color: #ffcc80;
            border: 2px solid #ff8c00;
        }
        .kg-35 {
            background-color: #ffb6c1;
            border: 2px solid #ff69b4;
        }
        .kg-40 {
            background-color: #b0c4de;
            border: 2px solid #4169e1;
        }
        .copy-btn {
            background-color: #4CAF50;
            color: white;
        }
        .copy-btn:hover {
            background-color: #45a049;
        }
    </style>
</head>
<body>
    <h1>รายการตั๋วเครื่องบินรวมกระเป๋าโหลด</h1>
    
    <div class="container">
        <div class="textarea-container">
            <textarea id="inputText" placeholder="วางข้อความตั๋วเครื่องบินที่นี่..."></textarea>
        </div>
        
        <div class="buttons-container">
            <button class="kg-15" onclick="calculatePrice(15)">15 กก.</button>
            <button class="kg-20" onclick="calculatePrice(20)">20 กก.</button>
            <button class="kg-25" onclick="calculatePrice(25)">25 กก.</button>
            <button class="kg-30" onclick="calculatePrice(30)">30 กก.</button>
            <button class="kg-35" onclick="calculatePrice(35)">35 กก.</br>DD-FD ไม่มี</button>
            <button class="kg-40" onclick="calculatePrice(40)">40 กก.</br>SL ไม่มี</button>
            <button class="copy-btn" onclick="copyOutput()">copy</button>
        </div>
        
        <div class="textarea-container">
            <textarea id="outputText" placeholder="ผลลัพธ์จะแสดงที่นี่..." readonly></textarea>
        </div>
    </div>

    <script>
        // Baggage fee information for different airlines
        const baggageFees = {
            "ไลอ้อน": {
                5: 200,
                10: 270,
                15: 380,
                20: 410,
                25: 500,
                30: 650,
                35: 800,
                40: null
            },
            "นกแอร์": {
                5: 0,
                10: 0,
                15: 450,
                20: 550,
                25: 630,
                30: 1000,
                35: null,
                40: 1200
            },
            "แอร์เอเชีย": {
                5: 0,
                10: 0,
                15: 600,
                20: 650,
                25: 800,
                30: 1250,
                35: null,
                40: 1550
            },
            "เวียตเจ็ท": {
                5: 0,
                10: 0,
                15: 380,
                20: 450,
                25: 540,
                30: 860,
                35: 1030,
                40: 1380
            }
        };
        
        // Map airline name variations to standard names
        const airlineNameMap = {
            "นกแอร์": "นกแอร์",
            "แอร์เอเชีย": "แอร์เอเชีย",
            "ไลอ้อน": "ไลอ้อน",
            "เวียตเจ็ท": "เวียตเจ็ท"
        };

        function calculatePrice(kg) {
            const inputText = document.getElementById('inputText').value;
            if (!inputText.trim()) {
                alert('กรุณาใส่ข้อมูลตั๋วเครื่องบิน');
                return;
            }

            // Process the input text line by line
            const lines = inputText.split('\n');
            let processedLines = [];
            let currentAirline = '';

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i];
                
                // Check if this line contains an airline name
                const airlineMatch = line.match(/(นกแอร์|แอร์เอเชีย|ไลอ้อน|เวียตเจ็ท)\s*\(ไม่รวมโหลด\)/);
                
                if (airlineMatch) {
                    currentAirline = airlineMatch[1];
                    // Replace the "ไม่รวมโหลด" text with the selected weight
                    const updatedLine = line.replace('(ไม่รวมโหลด)', `(รวมโหลด ${kg}กก.)`);
                    processedLines.push(updatedLine);
                } 
                // Check if this line contains flight times and prices
                else if (line.match(/\d{2}\.\d{2}-\d{2}\.\d{2}\s+ราคา\s+\d+/)) {
                    // Extract the price
                    const priceMatch = line.match(/ราคา\s+(\d+)/);
                    if (priceMatch && currentAirline) {
                        const basePrice = parseInt(priceMatch[1]);
                        // Get the standard airline name
                        const standardAirlineName = airlineNameMap[currentAirline] || currentAirline;
                        
                        // Get the baggage fee for the selected airline and weight
                        let fee = 0;
                        if (baggageFees[standardAirlineName] && baggageFees[standardAirlineName][kg] !== null) {
                            fee = baggageFees[standardAirlineName][kg] || 0;
                        } else {
                            // If no data for this kg, show original line
                            processedLines.push(line);
                            continue;
                        }
                        
                        // Calculate the new price
                        const newPrice = basePrice + fee;
                        // Replace the price in the line
                        const updatedLine = line.replace(/ราคา\s+\d+/, `ราคา ${newPrice}`);
                        processedLines.push(updatedLine);
                    } else {
                        processedLines.push(line); // Keep the line as is if no price match
                    }
                } else {
                    processedLines.push(line); // Keep the line as is
                }
            }

            document.getElementById('outputText').value = processedLines.join('\n');
        }

        function copyOutput() {
            const outputText = document.getElementById('outputText');
            outputText.select();
            document.execCommand('copy');
        }
    </script>
</body>
</html>
